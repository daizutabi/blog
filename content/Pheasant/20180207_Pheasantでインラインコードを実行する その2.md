Modified: 2018-09-02


[2018/2/5の記事](../../../2018/02/05/)でインラインコードを実行して出力テキストをMarkdownのソースとして使う機能について説明しました．今回，この機能を拡張して，画像などのテキスト以外の形式にも対応させました．

<!-- PELICAN_END_SUMMARY -->

試しに画像を出力してみます．

```python
import matplotlib.pyplot as plt

axes = plt.subplot(111)
plt.plot([1, 4, 2], axes=axes)
```

ここで，上の出力について少し説明しておきます．`plt.plot`関数の戻り値は，Lineオブジェクトのリストになります．．このようなセルの実行結果は，Jupyter Notebook Cellの中に，`output_type`属性が`execute_result`である`output`として格納されます．一方，Jupyterは，セルで作成された図を`output_type`属性が`display_data`である`output`の中に格納します．上の例で表示されている図はこの`display_data`を表示したものです．

次にfenced codeで，`axes.figure`としてみましょう．

```python
axes.figure
```

テキスト出力は，`Figure`オブジェクトになりますが，図は表示されません．Jupyterが返すセルの中には，図のデータ（Base64の文字列)も含まれます．そのデータは，`display_data`ではなく，`execute_result`として格納されています．fenced codeでは，テキスト以外では`display_data`のみ表示するようにしています．（変更の可能性あり）

次にインラインコードを示します．以下は，`{{#axes.figure}}`とした例です．インラインコードは，`execute_result`を表示するようにしていて，期待どおり図が表示されました．

{{axes.figure}}
