Title: ブログを始める
Date: 2017-12-15
Modified: 2017-12-17 07:56
Category: Pelican

[GitHub Pages](https://pages.github.com/)でブログを始めることにしました．[Pelican](https://blog.getpelican.com/)を使って記事を生成します．フォーマットはマークダウンにします．Pelicanでは，各記事のファイルの先頭に以下のようなメタデータを書く必要があります．

```text
Title: My First Review
Date: 2010-12-03 10:20
Category: Review
Slug: URL
```

記事を書くたびにこれらのメタデータを入力するのは少々面倒なので自動化を試みます．その成果をプロジェクト[`takuhai`](https://github.com/daizutabi/takuhai)にまとめたいと思っています．自動化のために定めた規約を紹介しておきます：

+ 記事を格納するルートディレクトリ（デフォルトでは`content`）直下のディレクトリ名をカテゴリー名とする．
+ その下のディレクトリから各記事に至るまでは任意のディレクトリ構造をとることができる．
+ 記事のファイル名は`<YYMMDD><sep><title>.md`とする．
+ `<YYMMDD>`は年月日である．例えば2017年12月6日であれば`171206`とする．西暦は下2桁のみを用いる．
+ `<sep>`は任意の1文字である．ファイル名が読みやすくなるように選べばよい．典型的にはアンダースコア(`_`)やピリオド(`.`)が選ばれる．
+ `<title>`はタイトルにそのまま用いる．
+ ファイルの先頭から最初の空行までをメタデータとする．
+ メタデータがひとつも含まれないファイルは，最初の行を空行とする．

それでは，`content`ディレクトリの下に`Pelican/12/171215_ブログを始める.md`を作成しましょう．ファイル名の途中の`/12/`は12月だからです．以下の内容で保存しておきます（最初の空行は必要です）:

```text
(ここには空行が入ります)
[GitHub Pages](https://pages.github.com/)でブログを始めることにしました．（後略）
```

[`convert`](https://github.com/daizutabi/takuhai/blob/master/takuhai/convert.py)関数を呼ぶと，このファイルに自動でメタデータを追加してくれます．

```python
>>> convert('Pelican/12/171215_ブログを始める.md')
```

`Pelican/12/171215_ブログを始める.md`は，以下の内容に変換されます．

```text
Title: ブログを始める
Date: 2017-12-15
Category: Pelican

[GitHub Pages](https://pages.github.com/)でブログを始めることにしました．（後略）
```

最後に，先に紹介した規約を定めた理由を述べておきましょう．まずルートディレクトリ直下にカテゴリを置いたのは，同じカテゴリに属する記事が近い位置にあると参照しやすいためです．逆に，まったく関連のない記事が同じディレクトリ内にあると，とても邪魔になるでしょう．また，ルートディレクトリから記事のファイルに至るまでのディレクトリ構造はどのようにしても構いませんでした．これは，流動的なディレクトリ構造を可能にするためです．ひとつめの記事を書くのに，わざわざ`2017/12/06`といったディレクトリ構造を作るのは大げさでしょう．はじめのうちは，カテゴリーディレクトリの直下に`171206_something.md`を作っておけばよいのです．記事の数が多くなって，ディレクトリ内の見通しが悪くなったら，その時に初めて月ごとあるいは年ごとのディレクトリを作り，そこに記事を移動しましょう．どのようなディレクトリ構造の中にあっても，ファイル名で記事の日付，タイトルを指定できるのです．
