<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" type="text/css" href="../theme/stylesheet/style.css">
  <link rel="stylesheet" type="text/css" href="../theme/stylesheet/pheasant.css">
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  <link href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@1.206/distr/fira_code.css" rel="stylesheet">

  <link rel="shortcut icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
  <meta name="author" content="daizutabi" />
  <title>大豆旅 &ndash; Posts by daizutabi
:</title>
</head>

<body>
  <aside>
    <div>
      <a href="..">
        <img src="https://www.gravatar.com/avatar/425bf792666d158202306d5dc73367d0?s=140" />
      </a>
      <h1><a href="..">大豆旅</a></h1>


    </div>
  </aside>
  <main>

<article>
  <header>
    <h2><a href="../2017/12/21/">DNS Zonesからネームサーバーを設定する方法</a></h2>
    <p>
      Posted on 2017年12月21日 (木) in <a href="../category/Pelican/">Pelican</a>


    </p>
  </header>
  <div>
      
<p><a href="https://blog.daizutabi.net/2017/12/20/">2017/12/20</a>に，ブログの公開を<a href="https://pages.github.com">GitHub Pages</a>から<a href="https://www.netlify.com">Netlify</a>に移行した件を書きました．ただ，その時の方法だと，最初にアップしたサイトが特権的な扱いを受けて，後続のサイトと非対称な形になってしまいました．少し気になっていたところ，DNS zonesから再設定することで，非対称性を解消できました．</p>
<!-- PELICAN_END_SUMMARY -->

<p>以下，順を追って説明したいと思います．次の前提で話を進めます．</p>
<ul>
<li>カスタムドメインとサイトをすでに登録していたので，すべて削除しました．</li>
<li><a href="https://www.onamae.com">お名前.com</a>で<code>daizutabi.net</code>を取得済です．</li>
<li>GitHub上の<a href="https://github.com/daizutabi/blog">「ブログ」</a>レポジトリと<a href="https://github.com/daizutabi/iroha">「Pythonパッケージの作り方」</a>レポジトリを公開していきます．</li>
</ul>
<p>（注）具体的な名前で説明したほうが分かりやすいと思いそのまま書いています．ドメイン名やレポジトリ名は適宜置き換えを行ってください．</p>
<h2><span class="pheasant-header"><span class="header"><span class="number">0.1</span> <span class="title">DNS zonesの設定</span></span></span></h2>
<p><a href="https://www.netlify.com">Netlify</a>にGitHubアカウントを使ってログインします．</p>
<p><img alt="daizutabi" src="../images/20171221/010.png"></p>
<p>左上のAll teamsからdaizutabiを選択します．</p>
<p><img alt="DNS zones" src="../images/20171221/020.png"></p>
<p>メニューからDNS zonesをクリックします．</p>
<p><img alt="Add a domain" src="../images/20171221/030.png"></p>
<p>Add a domainをクリックします …</p>
        <br>
        <a class="btn" href="../2017/12/21/">Continue reading
</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="../2017/12/20/">NetlifyでPelicanページを公開する</a></h2>
    <p>
      Posted on 2017年12月20日 (水) in <a href="../category/Pelican/">Pelican</a>


    </p>
  </header>
  <div>
      
<p>これまで<a href="https://pages.github.com">GitHub Pages</a>をブログなどの公開に使っていましたが，<a href="https://www.netlify.com">Netlify</a>に移行します．とても簡単に独自ドメインを使うことができます．</p>
<!-- PELICAN_END_SUMMARY -->

<p>（追記）以下の内容よりも，2017/12/21の<a href="https://blog.daizutabi.net/2017/12/21/">「DNS Zonesからネームサーバーを設定する方法」</a>のほうがお勧めです．</p>
<h2><span class="pheasant-header"><span class="header"><span class="number">0.1</span> <span class="title">お名前.comで独自ドメインの取得</span></span></span></h2>
<p><a href="https://www.onamae.com">お名前.com</a>で独自ドメインを取得します．金額に関しては，初年度だけでなく２年目以降の金額についてもチェックしておきましょう．また，「1.お申込み内容」のところで，</p>
<ul>
<li>Whois情報公開代行（新規登録と同時なら無料）</li>
</ul>
<p>は，個人情報を公開したくない場合にはチェックを入れておきます．</p>
<p>お名前.comのサイト内ですることは，取得したドメインのネームサーバをNetlify DNSに設定することだけです．それ以外の設定はすべて，Netlify内で完結します．</p>
<h2><span class="pheasant-header"><span class="header"><span class="number">0.2</span> <span class="title">静的サイトの作成</span></span></span></h2>
<p>Pelicanを使ってサイトを作成し，GitHubレポジトリにPushしておきます．</p>
<h2><span class="pheasant-header"><span class="header"><span class="number">0.3</span> <span class="title">Netifyでサイトの作成</span></span></span></h2>
<p><a href="https://www.netlify.com">Netlify</a>にはGitHubアカウントを使ってログインします．ログイン後に，<a href="https://app.netlify.com/">https …</a></p>
        <br>
        <a class="btn" href="../2017/12/20/">Continue reading
</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="../2017/12/19/">Gravater画像を貼り付ける</a></h2>
    <p>
      Posted on 2017年12月19日 (火) in <a href="../category/Pelican/">Pelican</a>


    </p>
  </header>
  <div>
      
<p>ブログサイトの右上のほうに<a href="https://ja.gravatar.com">Gravater</a>の画像を表示させてみます．画像の取得方法は<a href="https://ja.gravatar.com/site/implement/images/">Image Requests</a>や<a href="https://ja.gravatar.com/site/implement/images/python/">Python Image Requests</a>に記載されています．</p>
<!-- PELICAN_END_SUMMARY -->

<p>Gravaterに登録したアドレスからハッシュ値を生成します．</p>
<div class="pheasant-fenced-code"><div class="cached"><div class="input"><pre><code class="python">import hashlib
hashlib.md5(b&#39;daizutabi@gmail.com&#39;).hexdigest()</code></pre>
<p class="report"><span class="count">[1]</span>
<span class="start">2019-03-30 13:25:11</span> (<span class="elasped">31.3ms</span>)
<span class="right"><span class="kernel">python3</span><span class="count"> [2]</span>
</span></p></div><div class="output"><pre><code class="text">&#39;425bf792666d158202306d5dc73367d0&#39;</code></pre></div></div></div>

<p>ハッシュ値を使って，画像を読み込みます．</p>
<div class="pheasant-fenced-code"><div class="cached"><div class="input"><pre><code class="html">&lt;img src=&#34;https://www.gravatar.com/avatar/425bf792666d158202306d5dc73367d0&#34;/&gt;</code></pre>
<p class="report"><span class="count">[2]</span>
<span class="start">2019-03-30 13:25:11</span> (<span class="elasped">31.3ms</span>)
<span class="right"><span class="kernel"></span><span class="count"> [2]</span>
</span></p></div></div></div>

<p>実際の表示は以下の通りです …</p>
        <br>
        <a class="btn" href="../2017/12/19/">Continue reading
</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="../2017/12/18/">Pythonパッケージの作り方</a></h2>
    <p>
      Posted on 2017年12月18日 (月) in <a href="../category/Python/">Python</a>


    </p>
  </header>
  <div>
      
<p><a href="https://github.com/daizutabi/takuhai">Takuhai</a>を作成するにあたってPythonパッケージの作り方について学びました．<a href="https://iroha.daizutabi.net/">「Pythonパッケージの作り方」</a>に公開しています．パッケージを作るたびに<code>PYTHONPATH</code>を設定していたり，<code>setup.py</code>を作るのが敷居が高いなと思っている方の参考になれば幸いです．</p>
<!-- PELICAN_END_SUMMARY -->
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="../2017/12/17/">記事の自動ビルドとページのリロード</a></h2>
    <p>
      Posted on 2017年12月17日 (日) in <a href="../category/Pelican/">Pelican</a>


    </p>
  </header>
  <div>
      
<p><a href="https://github.com/daizutabi/takuhai">Takuhai</a>パッケージを作りました．Pelicanプロジェクト内の記事ファイルが更新されたら次のことを実行します：</p>
<ul>
<li>記事をビルドしてHTMLファイルを生成します．</li>
<li>ローカルのHTTPサーバを立ち上げて，生成した記事をブラウザで表示します．</li>
<li>記事が更新されたら，その都度ビルドして，ブラウザのページを自動でリロードします．</li>
</ul>
<!-- PELICAN_END_SUMMARY -->

<p>本パッケージを作成するにあたって，次の記事を参考にしました：</p>
<ul>
<li><a href="https://merlijn.vandeen.nl/2015/pelican-livereload.html">Using LiveReload with Pelican</a></li>
<li><a href="http://tech.agilitynerd.com/livereload-with-pelican.html">LiveReload with Pelican</a></li>
</ul>
<p>これらの記事が提供する機能に加えて，Takuhaiでは以下の改善を加えています：</p>
<ul>
<li><a href="https://pypi.org">PyPI</a>および<a href="https://anaconda.org">Anaconda Cloud</a>からのインストール．</li>
<li>実行コマンド<code>takuhai</code>の実装．</li>
<li>ホスト名やポート番号の指定．</li>
<li>ブラウザの自動起動．</li>
<li>相対URLと絶対URLの選択．</li>
</ul>
<p>特に有用と考えている「相対URLと絶対URLの選択」について説明します．Takuhaiの実行コマンド<code>takuhai</code>はデフォルトで相対URLを設定します．これは<code>pelicanconf.py</code>の設定を上書きします．</p>
<p>Pelicanドキュメントの<a href="http://docs.getpelican.com/en/stable/settings.html#url-settings">URL settings</a>によれば，絶対URLが望ましい選択とされています．しかし，これではローカルHTTPサーバを立ち上げても，リンク先が外部サイトになってしまいます．望ましい動作とは言えないでしょう …</p>
        <br>
        <a class="btn" href="../2017/12/17/">Continue reading
</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="../2017/12/16/">ブログを始める</a></h2>
    <p>
      Posted on 2017年12月16日 (土) in <a href="../category/Pelican/">Pelican</a>


    </p>
  </header>
  <div>
      
<p><a href="https://pages.github.com/">GitHub Pages</a>でブログを始めることにしました．<a href="https://blog.getpelican.com/">Pelican</a>を使って記事を生成します．フォーマットはマークダウンにします．</p>
<!-- PELICAN_END_SUMMARY -->

<p>Pelicanでは，各記事のファイルの先頭に以下のようなメタデータを書く必要があります．</p>
<div class="pheasant-fenced-code"><div class="cached"><div class="input"><pre><code class="text">Title: My First Review
Date: 2010-12-03 10:20
Category: Review
Slug: URL</code></pre>
<p class="report"><span class="count">[1]</span>
<span class="start">2019-03-30 13:25:11</span> (<span class="elasped">15.7ms</span>)
<span class="right"><span class="kernel"></span><span class="count"> [3]</span>
</span></p></div></div></div>

<p>記事を書くたびにこれらのメタデータを入力するのは少々面倒です．そこで，ファイル名から自動的にメタデータを抽出するようにします．設定ファイル<code>pelicanconf.py</code>に以下の内容を追加します．</p>
<div class="pheasant-fenced-code"><div class="cached"><div class="input"><pre><code class="text">PATH_METADATA = r&#39;(?P&lt;category&gt;.+?)/.*&#39;
FILENAME_METADATA = r&#39;(?P&lt;date&gt;\d{8}).(?P&lt;title&gt;.+)&#39;</code></pre>
<p class="report"><span class="count">[2]</span>
<span class="start">2019-03-30 13 …</span></p></div></div></div>
        <br>
        <a class="btn" href="../2017/12/16/">Continue reading
</a>
  </div>
</article>

  <div class="pagination">
    <a class="btn float-right" href="../author/daizutabi.html">
      Newer Posts
 <i class="fa fa-angle-right"></i>
    </a>
  </div>

    <footer>
    </footer>
  </main>
</body>

</html>