[GitHub Pages](https://pages.github.com/)でブログを始めることにしました．[Pelican](https://blog.getpelican.com/)を使って記事を生成します．フォーマットはマークダウンにします．

<!-- PELICAN_END_SUMMARY -->

Pelicanでは，各記事のファイルの先頭に以下のようなメタデータを書く必要があります．

```text
Title: My First Review
Date: 2010-12-03 10:20
Category: Review
Slug: URL
```

記事を書くたびにこれらのメタデータを入力するのは少々面倒です．そこで，ファイル名から自動的にメタデータを抽出するようにします．設定ファイル`pelicanconf.py`に以下の内容を追加します．

``` python
PATH_METADATA = r'(?P<category>.+?)/.*'
FILENAME_METADATA = r'(?P<date>\d{8}).(?P<title>.+)'
```

以下のようなルールで記事ファイルを`content`ディレクトリに配置します．

+ `content`ディレクトリ直下に置かれたディレクトリの名前がカテゴリー名になります．
+ その下のディレクトリから各記事ファイルに至るまでは任意のディレクトリ構造をとることができます．
+ 記事ファイルの名前は`<YYYYMMDD><sep><title>.md`とします．
+ `<YYYYMMDD>`は記事の作成日です．例えば2017年12月6日であれば`20171206`とします．
+ `<sep>`は任意の1文字です．ファイル名が読みやすくなるように選びます．典型的にはアンダースコア(`_`)やピリオド(`.`)となるでしょう．
+ `<title>`はタイトルにそのまま用います．

なお，記事内部で，`Title: `などのメタデータを指定した場合には，上の設定を上書きできます．ファイル名に含めることができない文字をタイトルに使いたいときも問題ありません．

このルールを採用した理由を述べておきます．

1. ルートディレクトリ直下にカテゴリを置いたのは，同じカテゴリに属する記事が近い位置にあると参照しやすいためです．逆に，まったく関連のない記事が同じディレクトリ内にあると，とても邪魔になるでしょう．また，カテゴリーの名前を変更するときには，たった一か所のディレクトリをリネームするだけで済みます．
2. ルートディレクトリから記事ファイルに至るまでのディレクトリ構造はどのようにしても構いませんでした．例えば，ひとつめの記事を書くのに，わざわざ`2017/12/06`といったディレクトリ構造を作るのは大げさでしょう．はじめのうちは，カテゴリーディレクトリの直下に`20171206_something.md`を作っておけばよいのです．記事の数が多くなって，ディレクトリ内の見通しが悪くなったら，その時に初めて月ごとあるいは年ごとのディレクトリを作り，そこに記事を移動しましょう．どのようなディレクトリ構造の中にあっても，ファイル名で記事の日付，タイトルを指定できます．

記事およびカテゴリーページのURLと出力先のファイル名は以下のように設定しています．一日に２本の記事を書くことはないため，記事のタイトルなどをURLに含めていません．また`CATEGORY_*`には`slug`を用いるとおかしなローマ字になるときがあるので，`name`をそのまま使います．

``` python
ARTICLE_URL = '{date:%Y}/{date:%m}/{date:%d}/'
ARTICLE_SAVE_AS = '{date:%Y}/{date:%m}/{date:%d}/index.html'
CATEGORY_URL = 'category/{name}/'
CATEGORY_SAVE_AS = 'category/{name}/index.html'
```

日付の設定は，以下の通りです．

``` python
TIMEZONE = 'Asia/Tokyo'
DEFAULT_LANG = 'ja'
DATE_FORMATS = {
    'ja': '%Y年%m月%d日 (%a)',
}
```
